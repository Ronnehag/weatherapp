(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=a(12),l=a.n(s),i=(a(24),a(25),a(3)),u=a.n(i),m=a(10),d=a(13),p=a(4),f=a(5),h=a(7),v=a(6),E=a(8),g=a(17),w=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state=t.initialState(),a.handleChange=function(e){a.setState(Object(g.a)({},e.target.name,e.target.value),Object(m.a)(u.a.mark(function e(){var t,n,r,c,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.state.country<3)){e.next=2;break}return e.abrupt("return");case 2:return t={data:{}},n=document.querySelector(".autocomplete"),e.next=6,a.fetchSuggestions("https://api.apixu.com/v1/search.json?key=".concat("5d1d8a019a1b42f2bd983655191203","&q=").concat(a.state.country));case 6:for(c in r=e.sent)r.hasOwnProperty(c)&&(o=r[c],t.data[o.name]=null);l.a.Autocomplete.init(n,t);case 9:case"end":return e.stop()}},e)})))},a.fetchSuggestions=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{err:"error"});case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),a.validateInput=function(e){return a.state.country.trim().toLowerCase().replace(/\xe5|\xe4/g,"a").replace(/\xf6/g,"o")},a.handleSubmit=function(e){e.preventDefault();var n=a.validateInput(a.state.country);a.props.searchForWeatherByName(n),a.setState(t.initialState())},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"row",autoComplete:"off"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 m5 l5 offset-m3 offset-l3"},r.a.createElement("input",{type:"text",name:"country",value:this.state.country,onChange:this.handleChange,className:"searchInput autocomplete"}),r.a.createElement("label",{htmlFor:"country"},"Location name")),r.a.createElement("div",{className:"input-field col s2 m2 l2"},r.a.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"btn waves-effect waves-light btn-search"},"Search")))))}}]),t}(n.Component);w.initialState=function(){return{country:""}};var b=w;function y(e){var t=e.name,a=e.country,n=e.icon,c=e.text,o=e.updated,s=e.tempC,l=e.addToFav;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 currentweather"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("img",{src:n,alt:"weather"}),r.a.createElement("p",null,c),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-temperature-low"})," ",s," \xb0C"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align",style:{position:"relative"}},r.a.createElement("span",null,t,", ",a," "),r.a.createElement("br",null),r.a.createElement("small",null,"Last updated: ",o),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"btn-small btn-fav",onClick:function(){return l(t)}},r.a.createElement("i",{className:"material-icons right color-yellow",title:"Add to favourites"},"favorite"),"Add to favorites")))))}function N(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s7 offset-s5"},r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate"}))))}var x=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(c)))).state=t.initialState(),a.addToFav=function(e){a.props.addToLocalStorage(e)},a.loadWeatherData=function(){try{if(0===a.state.weatherData.length)return r.a.createElement(N,null);var e=a.state.weatherData.location,t=e.name,n=e.country,c=a.state.weatherData.current,o=c.last_updated,s=c.temp_c,l=c.temp_f,i=c.is_day,u=a.state.weatherData.current.condition,m=u.text,d=u.icon;return r.a.createElement(y,{name:t,country:n,updated:o,tempC:s,tempF:l,icon:d,text:m,details:a.showDetails,addToFav:a.addToFav,isday:i})}catch(p){return r.a.createElement("p",null,"Ops! Couldn't fetch weather data :(")}},a.getLocation=function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(e):e(null)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.weatherData!==e.weatherData&&this.setState({weatherData:this.props.weatherData})}},{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{this.getLocation(function(){var e=Object(m.a)(u.a.mark(function e(a){var n,r,c,o,s,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a){e.next=2;break}return e.abrupt("return");case 2:return n=a.coords,r=n.longitude,c=n.latitude,e.next=5,fetch("https://api.apixu.com/v1/current.json?key=".concat("5d1d8a019a1b42f2bd983655191203","&q=").concat(c,",").concat(r));case 5:return o=e.sent,e.next=8,o.json();case 8:s=e.sent,t.setState({weatherData:s}),l=t.state.weatherData.location.name,t.props.search(l);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a)}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},this.loadWeatherData()))}}]),t}(n.Component);x.initialState=function(){return{weatherData:[]}};var S=x,j=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(c)))).favoriteList=function(){return a.props.favoriteLocations.length?a.props.favoriteLocations.map(function(e){var t=e.name,n=e.id;return r.a.createElement("li",{key:n,className:"center-align"},r.a.createElement("i",{style:O,className:"tiny right material-icons red-text text-darken-2",onClick:function(){return a.props.remove(n)}},"remove_circle"),r.a.createElement("span",{style:k,onClick:function(){return a.props.search(t)}},t))}):r.a.createElement("li",null,"No favorites")},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){l.a.AutoInit()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{style:{background:"#035A96"}},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("a",{className:"brand-logo",href:".",style:{marginLeft:"10px"}}," Forecast"),r.a.createElement("a",{href:"#!","data-target":"mobile-demo",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement("a",{className:"dropdown-trigger",href:"#!","data-target":"dropdown1"},"Saved locations",r.a.createElement("i",{className:"material-icons right"},"arrow_drop_down")))))),r.a.createElement("ul",{id:"dropdown1",className:"dropdown-content"},this.favoriteList()),r.a.createElement("div",null,r.a.createElement("ul",{className:"sidenav",id:"mobile-demo"},r.a.createElement("li",null,r.a.createElement("a",{className:"dropdown-trigger",href:"#!","data-target":"dropdown2"},"Saved locations",r.a.createElement("i",{className:"material-icons right"},"arrow_drop_down")))),r.a.createElement("ul",{id:"dropdown2",className:"dropdown-content"},this.favoriteList())))}}]),t}(n.Component),O={fontSize:"14px",marginRight:"14px"},k={padding:"19px 0 19px 10px",display:"inline-flex",fontSize:"13px"},L=j;function D(e){var t,a=e.date,n=e.mintemp,c=e.maxtemp,o=(e.description,e.icon),s=e.maxwind,l=e.epoch,i=e.avgtemp;return r.a.createElement("div",{className:"col s12 m2 l2"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content white-text center-align",style:C},r.a.createElement("div",{className:"row",style:{margin:"15px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12",style:{padding:"0"}},r.a.createElement("span",null,function(e){var t=new Date(0);switch(t.setUTCSeconds(e),t.getDay()){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return""}}(l)),r.a.createElement("br",null),r.a.createElement("span",null,a),r.a.createElement("br",null),r.a.createElement("img",{src:o,alt:"weather-icon"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-temperature-low"}),"  ",i,"\xb0C"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("small",null,r.a.createElement("i",{className:"fas fa-temperature-low"})," min ",n,"\xb0C"),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("i",{className:"fas fa-temperature-low"})," max ",c,"\xb0C"),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("i",{className:"fas fa-wind"})," ",(t=s,Math.round(.277778*t)/10)," m/s")))))))}var C={minHeight:"290px",background:"#035A96",padding:"5px 5px"},F=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(c)))).forecastList=function(){return a.props.forecast.length?a.props.forecast.map(function(e){var t=e.date,a=e.date_epoch,n=e.day,c=n.maxtemp_c,o=n.mintemp_c,s=n.maxwind_kph,l=n.avgtemp_c,i=e.day.condition,u=i.text,m=i.icon;return r.a.createElement(D,{key:t,date:t,maxtemp:c,mintemp:o,maxwind:s,description:u,icon:m,epoch:a,avgtemp:l})}):r.a.createElement(N,null)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 flex-box"},this.forecastList()))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state=t.initialState(),a.removeFromLocalStorage=function(e){a.setState({storedLocations:Object(d.a)(a.state.storedLocations.filter(function(t){return t.id!==e}))},function(){localStorage.setItem("locations",JSON.stringify(a.state.storedLocations))})},a.addToLocalStorage=function(e){if(e=e.split(",")[0],!a.state.storedLocations.find(function(t){return t.name===e}))if(null!==JSON.parse(localStorage.getItem("locations"))){var t={name:e,id:A()};a.setState(function(e){return{storedLocations:[].concat(Object(d.a)(a.state.storedLocations),[t])}},function(){localStorage.setItem("locations",JSON.stringify(a.state.storedLocations))})}else a.createStorage(e)},a.createStorage=function(e){var t={name:e,id:A()};a.setState(function(e){return{storedLocations:[].concat(Object(d.a)(e.storedLocations),[t])}}),localStorage.setItem("locations",JSON.stringify(t))},a.fetchData=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),a.searchForWeatherByName=function(){var e=Object(m.a)(u.a.mark(function e(t){var n,r,c,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,a.fetchData("https://api.apixu.com/v1/current.json?key=".concat("5d1d8a019a1b42f2bd983655191203","&q=").concat(t));case 5:return n=e.sent,e.next=8,a.fetchData("https://api.apixu.com/v1/forecast.json?key=".concat("5d1d8a019a1b42f2bd983655191203","&q=").concat(t,"&days=5"));case 8:r=e.sent,c=r.forecast,o=c.forecastday,a.setState({weatherData:n,forecastData:o}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(2);case 16:case"end":return e.stop()}},e,null,[[2,14]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("locations"));null!==e&&this.setState({storedLocations:e})}},{key:"render",value:function(){var e=this.state,t=e.weatherData,a=e.storedLocations;return r.a.createElement("div",null,r.a.createElement(L,{favoriteLocations:a,remove:this.removeFromLocalStorage,search:this.searchForWeatherByName}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m12 l12"},r.a.createElement(b,{searchForWeatherByName:this.searchForWeatherByName}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement(S,{addToLocalStorage:this.addToLocalStorage,weatherData:t,search:this.searchForWeatherByName}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement(F,{forecast:this.state.forecastData})))))}}]),t}(n.Component);function A(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}_.initialState=function(){return{weatherData:[],storedLocations:[],forecastData:[]}};var T=_,I=a(33),W=a(34),B=r.a.createElement(I.a,null,r.a.createElement("div",null,r.a.createElement(W.a,{exact:!0,path:"/",component:T})));o.a.render(B,document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.68ea94ae.chunk.js.map